<script>
	//helps to avoid already wrong sends
	function initElement(){
		// Set handler for team number change
		getTeamElem().onblur = onTeamNumberChanged;
		// Set handler for problem number change
		getProblemElem().oninput = onProblemNumberChanged;

	}

	function onTeamNumberChanged(){
		var team = getTeamValue();
		var teamnames = JSON.parse(sessionStorage.getItem("teamnames"));
		if(team > 0 && team < (getVersionValue() + 1) ){
			document.getElementById('current_team_name').innerText = teamnames[team-1];	
		}
	}

	function onProblemNumberChanged(){
	  team = getTeamValue();
	  problem = getProblemValue();
	  id = getIDValue();
	  //console.log(team, problem);
	  
	  google.script.run.withSuccessHandler(OnTeamResultsFetched).getTeamResults(team, problem,id);
	}

	function OnTeamResultsFetched(problem_result /* string */) {
	  document.getElementById('current_problem_results').innerText = problem_result;
	}
</script>